<h1 align="center">常用的Linux查询命令(96RuEy4x4ZtwCh)</h1>

## 1.文件和目录相关

```bash
- rwx r-x r-x
  属主  属组 other
第一位`-`表示文件
若是 `d` 则表示为目录
若是 `l` 则表示为链接文档(link file)
若是 `b` 则表示为装置文件里面的可供储存的接口设备(可随机存取装置)；
若是 `c` 则表示为装置文件里面的串行端口设备，例如键盘、鼠标(一次性读取装置)。
```

Linux系统按**文件所有者**、**文件所有者同组用户**和**其他用户**来规定了不同的文件访问权限。

***更改文件属性：***

> 1. 更改文件属组
>
>    `chgrp [-R] 属组名 文件名` 
>
>    `[-R]`选项是递归更改一个文件夹下的所有文件夹和文件的属组
>
> 2. 更改文件所有者（Owner），也可以更改文件属组
>
>    `chown [–R] 所有者 文件名`
>    `chown [-R] 所有者:属组名 文件名`
>
> 3. 更改文件的9个属性
>
>    Linux文件属性有两种设置方法，***一种是数字，一种是符号。***
>
>    文件权限`-rwxrwxrwx`其中，R：4；W：2；X：1；
>
>    ` chmod [-R] xyz 文件或目录`
>
>    还可以通过属主、属组、和其他身份的符号来更改
>
>    `chmod [u/g/o/a] +/-/= r/w/x File/Dir`

**处理目录的常见命令：**

- ls（英文全拼：list files）: 列出目录及文件名

  > - `-a` ：全部的文件，连同隐藏文件( 开头为 . 的文件) 一起列出来(常用)
  > - `-d` ：仅列出目录本身，而不是列出目录内的文件数据(常用)
  > - `-l` ：长数据串列出，包含文件的属性与权限等等数据；(常用)

- cd（英文全拼：change directory）：切换目录

- pwd（英文全拼：print work directory）：显示目前的目录

  > - `-P` ：显示出确实的路径，而非使用链接 (link) 路径。

- mkdir（英文全拼：make directory）：创建一个新的目录

  > `-p`，直接递归创建多层次目录结构。
  >
  > `-m`，直接创建文件夹时可以直接指定权限。

- rmdir（英文全拼：remove directory）：删除一个空的目录

  `-p`，删除多级空目录；

- cp（英文全拼：copy file）: 复制文件或目录

  > `cp [-adfilprsu] 来源档(source) 目标档(destination)`
  > `cp [options] source1 source2 source3 .... directory`
  >
  > ```bash
  > -a：相当于 -pdr 的意思，至于 pdr 请参考下列说明；(常用)
  > 
  > -d：若来源档为链接档的属性(link file)，则复制链接档属性而非文件本身；
  > 
  > -f：为强制(force)的意思，若目标文件已经存在且无法开启，则移除后再尝试一次；
  > 
  > -i：若目标档(destination)已经存在时，在覆盖时会先询问动作的进行(常用)
  > 
  > -l：进行硬式链接(hard link)的链接档创建，而非复制文件本身；
  > 
  > -p：连同文件的属性一起复制过去，而非使用默认属性(备份常用)；
  > 
  > -r：递归持续复制，用於目录的复制行为；(常用)
  > 
  > -s：复制成为符号链接档 (symbolic link)，亦即『捷径』文件；
  > 
  > -u：若 destination 比 source 旧才升级 destination ！
  > ```

- rm（英文全拼：remove）: 删除文件或目录

  >  `rm [-fir] 文件或目录`
  >
  > - `-f` ：就是 force 的意思，忽略不存在的文件，不会出现警告信息；
  > - `-i` ：互动模式，在删除前会询问使用者是否动作
  > - `-r` ：递归删除啊！最常用在目录的删除了！这是非常危险的选项！！！

- mv（英文全拼：move file）: 移动文件与目录，或修改文件与目录的名称

  > `mv [-fiu] source destination`
  > `mv [options] source1 source2 source3 .... directory`
  >
  > - `-f` ：force 强制的意思，如果目标文件已经存在，不会询问而直接覆盖；
  > - `-i` ：若目标文件 (destination) 已经存在时，就会询问是否覆盖！
  > - `-u` ：若目标文件已经存在，且 source 比较新，才会升级 (update)

**Linux文件的内容查看：**

- cat 由第一行开始显示文件内容

  >  `cat [-AbEnTv] filename`
  >
  > - A ：相当於 -vET 的整合选项，可列出一些特殊字符而不是空白而已；
  > - -b ：列出行号，仅针对非空白行做行号显示，空白行不标行号！
  > - -E ：将结尾的断行字节 $ 显示出来；
  > - -n ：列印出行号，连同空白行也会有行号，与 -b 的选项不同；
  > - -T ：将 [tab] 按键以 ^I 显示出来；
  > - -v ：列出一些看不出来的特殊字符

- tac 从最后一行开始显示，可以看出 tac 是 cat 的倒着写！

- nl  显示的时候，顺道输出行号！

  > `nl [-bnw] 文件`
  >
  > - -b ：指定行号指定的方式，主要有两种：
  >   -b a ：表示不论是否为空行，也同样列出行号(类似 cat -n)；
  >   -b t ：如果有空行，空的那一行不要列出行号(默认值)；
  > - -n ：列出行号表示的方法，主要有三种：
  >   -n ln ：行号在荧幕的最左方显示；
  >   -n rn ：行号在自己栏位的最右方显示，且不加 0 ；
  >   -n rz ：行号在自己栏位的最右方显示，且加 0 ；
  > - -w ：行号栏位的占用的位数。

- more 一页一页的显示文件内容

  > - 空白键 (space)：代表向下翻一页；
  > - Enter     ：代表向下翻『一行』；
  > - /字串     ：代表在这个显示的内容当中，向下搜寻『字串』这个关键字；
  > - :f      ：立刻显示出档名以及目前显示的行数；
  > - q       ：代表立刻离开 more ，不再显示该文件内容。
  > - b 或 [ctrl]-b ：代表往回翻页，不过这动作只对文件有用，对管线无用。

- less 与 more 类似，但是比 more 更好的是，他可以往前翻页！

  > - 空白键  ：向下翻动一页；
  > - [pagedown]：向下翻动一页；
  > - [pageup] ：向上翻动一页；
  > - /字串   ：向下搜寻『字串』的功能；
  > - ?字串   ：向上搜寻『字串』的功能；
  > - n     ：重复前一个搜寻 (与 / 或 ? 有关！)
  > - N     ：反向的重复前一个搜寻 (与 / 或 ? 有关！)
  > - q     ：离开 less 这个程序；

- head 只看头几行

  > `head [-n number] filename`

- tail 只看尾巴几行

  > `tail [-n number] filename`

## 2.用户和组相关

### 1.用户账号的管理

***添加新的用户账号：***`useradd 选项 username`

*可用选项：*

- -c comment 指定一段注释性描述。

- -d 目录 指定用户主目录，如果此目录不存在，则同时使用-m选项，可以创建主目录。

- -g 用户组 指定用户所属的用户组。

- -G 用户组，用户组 指定用户所属的附加组。

- -s Shell文件 指定用户的登录Shell。

- -u 用户号 指定用户的用户号，如果同时有-o选项，则可以重复使用其他用户的标识号

  ***查看所有Linux用户***： `awk -F':' '{ print $1}' /etc/passwd`或`cut -d: -f1 /etc/passwd`；查找组则将后面的配置文件替换为`/etc/group`

> #实例1
>
> `# useradd –d  /home/sam -m sam`：此命令创建了一个用户sam，其中-d和-m选项用来为登录名sam产生一个主目录 /home/sam（/home为默认的用户主目录所在的父目录）。
>
> `# useradd -s /bin/sh -g group –G adm,root gem`：此命令新建了一个用户gem，该用户的登录Shell是 `/bin/sh`，它属于group用户组，同时又属于adm和root用户组，其中group用户组是其主组。
>
> 这里可能新建组：`#groupadd group及groupadd adm`
>
> 增加用户账号就是在/etc/passwd文件中为新用户增加一条记录，同时更新其他系统文件如/etc/shadow, /etc/group等。
>
> Linux提供了集成的系统管理工具userconf，它可以用来对用户账号进行统一管理。

***删除账号：***`userdel 选项 用户名`；可以加上`-r`选项同时删除该用户的家目录

***修改账号：***`usermod 选项 用户名`

常用的选项包括`-c, -d, -m, -g, -G, -s, -u以及-o等`，这些选项的意义与`useradd`命令中的选项一样，可以为用户指定新的资源值。

另外，有些系统可以使用选项：`-l` 新用户名

这个选项指定一个新的账号，即将原来的用户名改为新的用户名。

实例：` usermod -s /bin/ksh -d /home/z –g developer sam`；

将用户sam的登录Shell改为ksh；家目录改为z；属组改为developer。

***用户密码的管理：***`passwd 选项 username`

- -l 锁定口令，即禁用账号。
- -u 口令解锁。
- -d 使账号无口令。
- -f 强迫用户下次登录时修改口令。

### 2.用户组管理

一般来说与用户同名的用户组会在该用户被创建时一起创建。

***增加新的用户组：***`groupadd 选项 用户组`

> #可用选项
>
> - -g GID 指定新用户组的组标识号（GID）。
> - -o 一般与-g选项同时使用，表示新用户组的GID可以与系统已有用户组的GID相同。

***删除组：***`groupdel groupname`

***修改组的属性：***`groupmod 选项 用户组`

> - -g GID 为用户组指定新的组标识号。
> - -o 与-g选项同时使用，用户组的新GID可以与系统已有用户组的GID相同。
> - -n新用户组 将用户组的名字改为新名字

***用户切换到其他组：***` newgrp root`

### 3.与用户账号有关的系统文件

1. ***`/etc/passwd`***存储了关于用户的基本信息，并且对于所有用户可读。

   ```bash
   ＃ cat /etc/passwd
   
   root:x:0:0:Superuser:/:
   daemon:x:1:1:System daemons:/etc:
   bin:x:2:2:Owner of system commands:/bin:
   sys:x:3:3:Owner of system files:/usr/sys:
   adm:x:4:4:System accounting:/usr/adm:
   uucp:x:5:5:UUCP administrator:/usr/lib/uucp:
   auth:x:7:21:Authentication administrator:/tcb/files/auth:
   cron:x:9:16:Cron daemon:/usr/spool/cron:
   listen:x:37:4:Network daemon:/usr/net/nls:
   lp:x:71:18:Printer administrator:/usr/spool/lp:
   sam:x:200:50:Sam san:/home/sam:/bin/sh
   
   ```

   每行记录会被`:`分割为7个字段，解读一下。

   ***`用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录Shell:`***

   **口令：**现在许多Linux 系统（如SVR4）都使用了shadow技术，把真正的加密后的用户口令字存放到`/etc/shadow`文件中，而在/etc/passwd文件的口令字段中只存放一个特殊的字符，例如`x`或者`*`。

   **用户标识号：**一般情况下它与用户名是一一对应的。如果几个用户名对应的用户标识号是一样的，系统内部将把它们视为同一个用户，但是它们可以有不同的口令、不同的主目录以及不同的登录Shell等。

   通常用户标识号的取值范围是`0～65535`。0是超级用户root的标识号，1～99由系统保留，作为管理账号，普通用户的标识号从100开始。在Linux系统中，这个界限是500。

   **组标识号：**记录用户所属的用户组，它对应着`/etc/group`文件中的一条记录。

   **注释性描述：**这个字段存放的是一段任意的注释性描述文字，用做finger命令的输出。

   **home目录：**用户登录到系统后所处的目录位置；各用户对自己的主目录有读、写、执行（搜索）权限，其他用户对此目录的访问权限则根据具体情况设置。

   **SHELL：**用户的登录Shell也可以指定为某个特定的程序（此程序不是一个命令解释器）。

   利用这一特点，我们可以限制用户只能运行指定的应用程序，在该应用程序运行结束后，用户就自动退出了系统。有些Linux 系统要求只有那些在系统中登记了的程序才能出现在这个字段中。

   **伪用户：**这些用户在/etc/passwd文件中也占有一条记录，但是不能登录，因为它们的登录Shell为空。它们的存在主要是方便系统管理，满足相应的系统进程对文件属主的要求。

   常见的伪用户如下所示：

   > 伪 用 户 含 义 
   > `bin 拥有可执行的用户命令文件` 
   > `sys 拥有系统文件` 
   > `adm 拥有帐户文件` 
   > `uucp UUCP使用` 
   > `lp lp或lpd子系统使用` 
   > `nobody NFS使用`

2. ***`/etc/shadow`***文件

   shadow文件中存储了加密后的密码，以及一些用户的其他敏感信息。所以该文件只有超级用户可以读取

   `/etc/shadow`中的记录行与`/etc/passwd`中的一一对应，它由`pwconv`命令根据`/etc/passwd`中的数据自动产生

   和`passwd`文件类似，`shadow`也用`:`隔开。

   > `root:$5$FajNLQa0$OnPCUAu22eUX8xHus4V.7RSmeOcFsliwoDfhoIeqpf2:19926:0:99999:7:::`
   >
   > ***`登录名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:标志`***
   >
   > 1. "登录名"是与/etc/passwd文件中的登录名相一致的用户账号
   > 2. "口令"字段存放的是加密后的用户口令字，长度为13个字符。如果为空，则对应用户没有口令，登录时不需要口令；如果含有不属于集合 { ./0-9A-Za-z }中的字符，则对应的用户不能登录。
   > 3. "最后一次修改时间"表示的是从某个时刻起，到用户最后一次修改口令时的天数。时间起点对不同的系统可能不一样。例如在SCO Linux 中，这个时间起点是1970年1月1日。
   > 4. "最小时间间隔"指的是两次修改口令之间所需的最小天数。
   > 5. "最大时间间隔"指的是口令保持有效的最大天数。
   > 6. "警告时间"字段表示的是从系统开始警告用户到用户密码正式失效之间的天数。
   > 7. "不活动时间"表示的是用户没有登录活动但账号仍能保持有效的最大天数。
   > 8. "失效时间"字段给出的是一个绝对的天数，如果使用了这个字段，那么就给出相应账号的生存期。期满后，该账号就不再是一个合法的账号，也就不能再用来登录了。

3. ***`/etc/group`***文件存储了组的所有信息。

   > `test2:x:1003:`
   >
   > ***`组名:口令:组标识号:组内用户列表`***
   >
   > 1. "组名"是用户组的名称，由字母或数字构成。与/etc/passwd中的登录名一样，组名不应重复。
   > 2. "口令"字段存放的是用户组加密后的口令字。一般Linux 系统的用户组都没有口令，即这个字段一般为空，或者是*。
   > 3. "组标识号"与用户标识号类似，也是一个整数，被系统内部用来标识组。
   > 4. "组内用户列表"是属于这个组的所有用户的列表，不同用户之间用逗号(,)分隔。这个用户组可能是用户的主组，也可能是附加组。

4. 批量添加用户

   - 编辑用户文本文件`user.txt`：
     ```bash
     user001::600:100:user:/home/user001:/bin/bash
     user002::601:100:user:/home/user002:/bin/bash
     user003::602:100:user:/home/user003:/bin/bash
     user004::603:100:user:/home/user004:/bin/bash
     user005::604:100:user:/home/user005:/bin/bash
     user006::605:100:user:/home/user006:/bin/bash
     ```

   - 导入数据创建用户：`newusers < user.txt`

   - 将 `/etc/shadow` 产生的 `shadow` 密码解码，然后回写到 `/etc/passwd` 中，并将`/etc/shadow`的`shadow`密码栏删掉。这是为了方便下一步的密码转换工作，即先取消 `shadow password` 功能。

     > ` pwunconv`

   - 编辑用户名和密码对照文件：`username:passwd`；写入文件`passwd.txt`

   - 创建用户密码：`ss chpasswd < passwd.txt`

   - 执行命令 `/usr/sbin/pwconv` 将密码编码为 `shadow password`，并将结果写入 `/etc/shadow`。

## 3.磁盘管理

三个常用命令：`df du 和 fdisk`

1. `df`(disk free)：列出文件系统的整体磁盘使用量。

   >  `df [-ahikHTm] [目录或文件名]`
   >
   > - `-h`：以可读性更好的方式显示输出结果（例如，使用 KB、MB、GB 等单位）。
   > - `-T`：显示文件系统的类型。
   > - `-t <文件系统类型>`：只显示指定类型的文件系统。
   > - `-i`：显示 inode 使用情况。
   > - `-H`：该参数是 `-h` 的变体，但是使用 1000 字节作为基本单位而不是 1024 字节。这意味着它会以 SI（国际单位制）单位（例如 MB、GB）而不是二进制单位（例如 MiB、GiB）来显示磁盘使用情况。
   > - `-k`：这个选项会以 KB 作为单位显示磁盘空间使用情况。
   > - `-a`：该参数将显示所有的文件系统，包括虚拟文件系统，例如 `proc`、`sysfs` 等。如果没有使用该选项，默认情况下，`df` 命令不会显示虚拟文件系统。
   >
   > 将输出结果以显示行号的方式打印到SHELL：`df -Th > use && cat use -n`

2. du(disk used)：检查磁盘空间使用量。

   > 对文件和目录磁盘使用的空间的查看
   >
   > `du [-ahskm] FilenameOrDirname`
   >
   > - -a ：列出所有的文件与目录容量，因为默认仅统计目录底下的文件量而已。
   > - -h ：以人们较易读的容量格式 (G/M) 显示；
   > - -s ：仅显示指定目录或文件的总大小，而不显示其子目录的大小。
   > - -S ：包括子目录下的总计，与 -s 有点差别。
   > - -k ：以 KBytes 列出容量显示；
   > - -m ：以 MBytes 列出容量显示；
   >
   > 默认情况下，`du`命令只会列出目录，加上`-a`选项后会一同列出文件。

3. fdisk一般用于操作磁盘分区表：`fdisk [-l] 装置名称`

   > - `-l` ：输出后面接的装置所有的分区内容。若仅有 fdisk -l 时， 则系统将会把整个系统内能够搜寻到的装置的分区均列出来。
   >
   > 找出你系统中的根目录所在磁盘，并查阅该硬盘内的相关信息：
   >
   > `df -h / `
   >
   > 输出结果：`/dev/vda1`
   >
   > `fdisk /dev/vda`，注意不要加上数字。

4. 磁盘格式化`mkfs`

   > 磁盘格式化：`mkfs [-t 文件系统格式] 装置文件名`
   >
   > `blkid`，查看磁盘的UUID。
   >
   > `lsblk`该命令会以树状结构列出系统中的所有块设备，包括磁盘和分区。在输出中，可以看到每个设备的名称、大小、类型以及挂载点（如果有）。
   >
   > `df -h`该命令会列出系统中已挂载的文件系统的空间使用情况。在输出中，可以看到每个文件系统的挂载点、总空间、已用空间和可用空间等信息。

5. 磁盘检查

   > `fsck [-t 文件系统] [-ACay] 装置名称`，其中
   >
   > - -t : 给定档案系统的型式，若在 /etc/fstab 中已有定义或 kernel 本身已支援的则不需加上此参数
   > - -s : 依序一个一个地执行 fsck 的指令来检查
   > - -A : 对/etc/fstab 中所有列出来的 分区（partition）做检查
   > - -C : 显示完整的检查进度
   > - -d : 打印出 e2fsck 的 debug 结果
   > - -p : 同时有 -A 条件时，同时有多个 fsck 的检查一起执行
   > - -R : 同时有 -A 条件时，省略 / 不检查
   > - -V : 详细显示模式
   > - -a : 如果检查有错则自动修复
   > - -r : 如果检查有错则由使用者回答是否修复
   > - -y : 选项指定检测每个文件是自动输入yes，在不确定那些是不正常的时候，可以执行 # fsck -y 全部检查修复。
   >
   > 查看磁盘的分区信息：`parted /dev/vda 'print'`
   >
   > 卸载磁盘：`umount /dev/vdb`
   >
   > 检查磁盘：`fsck /dev/vdb`
   >
   > 挂载磁盘到根目录：`mount /dev/vdb /`
   >
   > 

6. 



















## 4.内核信息



